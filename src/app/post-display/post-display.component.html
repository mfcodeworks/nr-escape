<!-- Profile Row -->
<mat-list-item>
    <img matListAvatar [src]="post.author.profilePic" class="avatar"  [routerLink]="['/profile', post.author.id]"/>
    <h3 matLine>
        <span [routerLink]="['/profile', post.author.id]" class="post-username-text mat-h3">{{post.author.username}}</span>
        <!-- Update to check if user following author -->
        <a mat-button color="accent" (click)="followUser(post.author.id)" *ngIf="!isFollowed">Follow</a>
    </h3>
    <span *ngIf="post.repost"><i class="ti-reload"></i></span>
    <span class="post-datetime">{{ post.createdAt | dateDiff }}</span>
    <i class="ti-menu-alt ml-3" [matMenuTriggerFor]="menu"></i>
    <!-- TODO: Make menu functional -->
    <mat-menu #menu="matMenu">
        <button mat-menu-item>Delete</button>
        <button mat-menu-item>Report</button>
        <button mat-menu-item>Share</button>
    </mat-menu>
</mat-list-item>

<span *ngIf="post.type.startsWith('image')">
    <!-- Caption Row -->
    <mat-list-item *ngIf="post.caption">
        <p class="mat-body">{{post.caption}}</p>
    </mat-list-item>

    <!-- Post Media -->
    <img class="post-image" [src]="post.media" (dblclick)="likePost()"/>
</span>

<span *ngIf="post.type.startsWith('video')">
    <!-- Caption Row -->
    <mat-list-item *ngIf="post.caption">
        <p class="mat-body">{{post.caption}}</p>
    </mat-list-item>

    <!-- Post Media -->
    <video class="post-image" (dblclick)="likePost()" playsinline loop controls controlsList="nofullscreen nodownload" preload="metadata">
        <source class="post-image" [src]="post.media" [type]="post.type"/>
    </video>
</span>

<span *ngIf="post.type == 'text'">
    <mat-divider></mat-divider>
    <!-- Caption as Post -->
    <mat-list-item class="text-post-container" (dblclick)="likePost(post)" >
        <span class="text-post">{{post.caption}}</span>
    </mat-list-item>
    <mat-divider></mat-divider>
</span>

<!-- TODO: Display URL Post -->
