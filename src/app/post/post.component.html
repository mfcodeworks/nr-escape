<!-- App Top Bar -->
<app-top-bar></app-top-bar>

<!-- Container -->
<div class="min-h-100">
    <mat-list *ngIf="this.post" class="mb-5">

        <!-- Post Display -->
        <app-post-display [post]="post"></app-post-display>

        <!-- Post Interaction Row -->
        <app-post-interaction-bar [post]=post></app-post-interaction-bar>

        <mat-divider></mat-divider>

        <!-- TODO: Comment Display -->
        <span *ngIf="comments.length == 0">
            <p class="mat-body error-placeholder mt-3">I've Got Nothing</p>
        </span>

        <span *ngIf="post.comments.length">
            <div *ngFor="let comment of comments" class="d-flex comment-container my-3" id="comment{{comment.id}}">
                <img [src]="comment.author.profilePic" [routerLink]="['/profile', comment.author.id]" matAvatar class="avatar mx-2" />
                <span class="d-flex comment-text-container w-100">
                    <p class="mb-0"><b [routerLink]="['/profile', comment.author.id]">{{comment.author.username}}</b> {{comment.text}}</p>
                    <p matSmall class="datetime">{{comment.datetime | dateDiff}}</p>
                </span>
            </div>
        </span>

    </mat-list>

    <span *ngIf="!post">
        <p class="mat-body error-placeholder mt-4">Sorry, I couldn't find that one</p>
    </span>

    <!-- Comment Input -->
    <div #commentForm class="app-background-color comment-form w-100 px-2">
        <mat-form-field appearance="standard" class="w-100" style="top: -8px;">
            <mat-label>Comment&hellip;</mat-label>
            <textarea matInput
                cdkTextareaAutosize
                #autosize="cdkTextareaAutosize"
                #comment
                cdkAutosizeMinRows="1"></textarea>
            <!-- TODO: Send comment to server -->
            <mat-icon matSuffix (click)="comment.value = ''">send</mat-icon>
        </mat-form-field>
    </div>
</div>

<!-- App Botttom Bar -->
<app-bottom-bar></app-bottom-bar>
